   public bool CreateOrder(OrderDTO Order)
    {
        string useremail = _httpContextAccessor.HttpContext?.User?.FindFirst(ClaimTypes.Email)?.Value;
        User user = _userRepository.GetUserByEmail(useremail);
        using var transaction = _productRepository.BeginTransaction();
        try
        {
            var order = new Order
            {
                Userid = user.Userid,
                Ordernumber = Order.Ordernumber,
                Orderstatus = Order.Orderstatus,
                Paymentmethod = Order.Paymentmethod,
                Totalamount = Order.Price,
                Totalitems = Order.Totalitems,
                Createdat = DateTime.Now,
                Createdby = user.Userid,
                Orderitems = Order.CartItems.Select(item => new Orderitems
                {
                    Productid = item.Productid,
                    Quantity = item.Quantity,
                    Price = _productRepository.GetProductById((int)item.Productid)?.Price ?? 0,
                    Createdat = DateTime.Now,
                    Createdby =  user.Userid,
                }).ToList()

            };

            _orderRepository.AddOrder(order);
            // Empty the usercart after successful order creation
            transaction.Commit();
            _orderRepository.EmptyCart(user.Userid);
            return true;
        }
        catch (Exception ex)
        {
            transaction.Rollback();
            throw new Exception("An error occurred while deleting the product.", ex);
        }
    }after the order craete i want to send the order confirmation email like these body Email Specifications
Subject:
Order Placed - #[Order Number]
Email Body:
Hello [Customer Name],
Thank you for your order! Below are the details of your purchase:
Order Date: [Order Date]  
Order Number: [Order Number]  
Order Status: [Order Status]  
Total Items: [Total Item Count]
Order Summary:
Order Summary Table
Product Name	Quantity	Unit Price	Total
Example Item 1	2	$10.00	$20.00
Example Item 2	1	$15.00	$15.00
...	...	...	...
Total Order Amount: $[Total Amount]
Thank you for shopping with us!
E-commerce System Team
Acceptance Criteria
Email should be triggered only after a successful order placement.
All dynamic placeholders (e.g., [Order Number], [Total Amount]) must be correctly populated.
Email should be responsive and display well in all major email clients.
Ensure HTML and plain text versions are both supported (if applicable).Implementing the same format PDF file using the iTextSharp library and attaching it to the order confirmation email would be a valuable enhancement.
Add relevant unit tests to ensure email template formatting and data mapping.
