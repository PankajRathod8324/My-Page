using System.ComponentModel.DataAnnotations;
using Entities.Models;
using X.PagedList;

namespace Entities.ViewModel
{
    public class TaxVM : IValidatableObject
    {
        public List<Taxis> AllTaxes { get; set; } = new List<Taxis>();

        public IPagedList<Taxis>? Taxes { get; set; }

        [Range(1, int.MaxValue, ErrorMessage = "Tax Id must be a positive integer")]
        public int TaxId { get; set; }

        [Required(ErrorMessage = "Tax Name is required")]
        [StringLength(50, ErrorMessage = "Tax Name cannot be longer than 50 characters")]
        [RegularExpression(@"^[A-Za-z\s]+$", ErrorMessage = "Tax Name must contain only alphabets and spaces")]
        public string TaxName { get; set; } = null!;

        public bool IsEnabled { get; set; }

        public bool IsDefault { get; set; }

        [Range(1, int.MaxValue, ErrorMessage = "Tax Type Id must be a positive integer")]
        public int? TaxTypeId { get; set; }

        [Required(ErrorMessage = "Tax Type Name is required")]
        [StringLength(50, ErrorMessage = "Tax Type Name cannot be longer than 50 characters")]
        public string TaxTypeName { get; set; } = null!;

        [Required(ErrorMessage = "Tax Amount is required")]
        [RegularExpression(@"^\d+(\.\d{1,2})?$", ErrorMessage = "Tax Amount can contain up to two decimal places")]
        public decimal TaxAmount { get; set; }

        public bool? IsDeleted { get; set; }

        public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
        {
            if (TaxTypeId == 1)
            {
                if(TaxAmount < 0 || TaxAmount > 100)
                {
                    yield return new ValidationResult("Tax Amount must be between 0 and 100 for percentage type", new[] { nameof(TaxAmount) });
                }
            }
        }




    }
}

 <div class="modal" id="newtaxModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog  modal-dialog-centered">
            <div class="modal-content">
                <form id="AddTax">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="modal-header border-bottom-0">
                        <h5 class="modal-title text-secondary" id="exampleModalLabel">Add New Tax</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">


                        <!-- Category Dropdown -->
                        <div class="row d-flex justify-space-between">
                            <div class="row">
                                <div class="col">
                                    <div class="form-floating mb-3">
                                        <input type="text" asp-for="TaxName" class="form-control" id="floatingInput">
                                        <label for="floatingInput" asp-for="TaxName">Name*</label>
                                        <span asp-validation-for="TaxName" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col">
                                    <div class="form-floating"> <select class="form-select" asp-for="TaxTypeId"
                                            asp-items="ViewBag.Taxtypes" id="floatingSelect"
                                            aria-label="Floating label select example">
                                            <option selected>Tax Type</option>
                                        </select>
                                        <label for="floatingSelect">Type*</label>
                                        <span asp-validation-for="TaxTypeId" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-floating mb-3">
                                        <input type="number" asp-for="TaxAmount" class="form-control" id="floatingInput">
                                        <label for="floatingInput" asp-for="TaxName">Tax Amount*</label>
                                        <span asp-validation-for="TaxAmount" class="text-danger"></span>
                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <!-- Switch Toggles -->
                                <div class="col-4">
                                    <div class=" form-switch d-flex align-item-center justify-space-between gap-2 ">
                                        <input class="form-check-input" type="checkbox" id="toggleSwitch"
                                            name="IsEnabled" asp-for="IsEnabled"
                                            style="border-radius: 1rem !important;">
                                        <label for="floatingInput" asp-for="IsEnabled"
                                            class="form-label mt-1 ms-3">IsEnabled</label>
                                    </div>
                                </div>

                                <div class="col-4">
                                    <div class=" form-switch d-flex align-item-center justify-space-between gap-2 ">
                                        <input class="form-check-input" type="checkbox" id="toggleSwitch"
                                            name="IsDefault" asp-for="IsDefault"
                                            style="border-radius: 1rem !important;">
                                        <label for="floatingInput" asp-for="IsDefault"
                                            class="form-label mt-1 ms-3">Default</label>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="modal-footer border-top-0">
                        <button type="submit" class="btn  webybg fs-6 fw-bold text-white px-4">Save</button>
                        <button type="button" class="btn  webyborder webybtn fw-bold px-4"
                            data-bs-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div> why it is not working like the vadiate function
