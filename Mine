public class PaymentDTO
{
    public decimal Amount { get; set; }
    public List<CartItemDTO> CartItems { get; set; }
}

public class CartItemDTO
{
    public int Productid { get; set; }
    public int Quantity { get; set; }
    public decimal Price { get; set; }
    public int Cartitemid { get; set; }
}
[HttpPost]
public IActionResult StorePaymentData([FromBody] PaymentDTO dto)
{
    TempData["TotalAmount"] = dto.Amount;
    TempData["CartItems"] = System.Text.Json.JsonSerializer.Serialize(dto.CartItems);
    return Ok();
}
$.ajax({
    url: "/Payment/StorePaymentData",
    type: "POST",
    contentType: "application/json; charset=utf-8",
    data: JSON.stringify({
        amount: totalPrice,
        cartItems: cartItems
    }),
    success: function () {
        window.location.href = "/Payment/Index";
    },
    error: function () {
        alert("Something went wrong while preparing payment.");
    }
});
