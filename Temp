
    [Authorize(Policy = "MenuEditPolicy")]
    public IActionResult EditMenuItem(int itemId)
    {
        // Fetch Categories
        ViewBag.Categories = _menuService.GetAllCategories()
            .Select(r => new SelectListItem { Value = r.CategoryId.ToString(), Text = r.CategoryName })
            .ToList();

        // Fetch Item Types
        ViewBag.Itemtypes = _menuService.GetAllItemTypes()
            .Select(r => new SelectListItem { Value = r.ItemtypeId.ToString(), Text = r.ItemType1 })
            .ToList();

        // Fetch Units
        ViewBag.Units = _menuService.GetAllUnits()
            .Select(r => new SelectListItem { Value = r.UnitId.ToString(), Text = r.UnitName })
            .ToList();

        // Fetch Modifier Groups
        ViewBag.ModifierGroups = _menuService.GetAllModifierGroups()
            .Select(r => new SelectListItem { Value = r.ModifierGroupId.ToString(), Text = r.ModifierGroupName })
            .ToList();

        // Get the Item
        var item = _menuService.GetItemById(itemId);
        if (item == null)
        {
            return NotFound(); // Return a 404 if the item doesn't exist
        }

        // Fetch associated modifier groups
        ItemModifierGroup itemModifiers = _menuService.GetItemModifier(item.ItemId, (int)item.ModifierGroupId);

        var itemvm = new MenuCategoryVM
        {
            CategoryId = item.CategoryId,
            ItemId = item.ItemId,
            ItemName = item.ItemName,
            ItemtypeId = item.ItemtypeId,
            Rate = item.Rate,
            Quantity = item.Quantity,
            UnitId = item.UnitId,
            IsAvailable = item.IsAvailable ?? false,
            TaxDefault = item.TaxDefault,
            TaxPercentage = item.TaxPercentage,
            ShortCode = item.ShortCode,
            Description = item.Description,
            ModifierGroupId = item.ModifierGroupId
        };


        return PartialView("_EditItemPV", itemvm);
    }
