public List<OrderVM> GetOrderViewModelData(int categoryId, string status)
{
    using var connection = new NpgsqlConnection(_connectionString);
    connection.Open();

    // Execute stored procedure
    using (var command = new NpgsqlCommand("CALL get_order_vm_data_temp(@p_category_id, @p_status);", connection))
    {
        command.Parameters.AddWithValue("p_category_id", categoryId);
        command.Parameters.AddWithValue("p_status", (object?)status ?? DBNull.Value);
        command.ExecuteNonQuery();
    }

    // Fetch results directly from temp table
    var result = connection.Query<OrderVM>("SELECT * FROM temp_order_vm_data").ToList();

    return result;
}
