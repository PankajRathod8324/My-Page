CREATE OR REPLACE FUNCTION get_order_section()
RETURNS TABLE (
    section_id INT,
    section_name TEXT,
    table_id INT,
    table_name TEXT,
    status_name TEXT,
    capacity INT,
    customer_id INT,
    order_id INT,
    total_amount NUMERIC,
    created_at TIMESTAMP
)
AS $$
BEGIN
    RETURN QUERY
    SELECT
        s."SectionId",
        s."SectionName",
        t."TableId",
        t."TableName",
        st."StatusName",
        t."Capacity",
        o."CustomerId",
        o."OrderId",
        o."TotalAmount",
        o."CreatedAt"
    FROM "Sections" s
    JOIN "Tables" t ON t."SectionId" = s."SectionId"
    JOIN "Statuses" st ON st."StatusId" = t."StatusId"
    LEFT JOIN "CustomerTables" ct ON ct."TableId" = t."TableId" AND ct."IsActive" = true
    LEFT JOIN "Orders" o ON o."CustomerId" = ct."CustomerId" AND o."OrderStatusId" = 6;
END;
$$ LANGUAGE plpgsql;
var result = _context.YourDbContextName
    .FromSqlRaw("SELECT * FROM get_order_section()")
    .ToList();
